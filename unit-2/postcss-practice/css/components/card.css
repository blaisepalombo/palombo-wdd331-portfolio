/**
 * Card Component
 * A responsive card that adapts to its container size using container queries.
 * Uses @supports for progressive enhancement with fallbacks.
 */

/* Base styles (fallback): cards stack vertically everywhere by default.
   This will work even in browsers without container query support. */

.card-container {
  /* Container query setup:
     Put the container properties here so child cards can query this container. */
  container-type: inline-size;
  container-name: card;

  .card {
    background-color: var(--bg-clr);
    border: 1px solid var(--table-border-clr);
    border-radius: var(--radius-med);
    padding: var(--spacing-med);
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);

    .card-image {
      width: 100%;
      height: auto;
      border-radius: var(--radius-sm);
      object-fit: cover;
    }

    .card-title {
      font-size: var(--font-size-med);
      font-weight: 700;
      color: var(--text-clr);
    }

    .card-description {
      font-size: var(--font-size-med);
      color: var(--text-clr);
      line-height: var(--line-height-med);
    }
  }
}

/* Progressive enhancement: only apply container query rules if supported.
   Browsers without container queries will ignore this block and keep base styles. */
@supports (container-type: inline-size) {
  /* (Optional) You can keep this here too; having it in both places is fine.
     Keeping it here makes the “enhanced” behavior self-contained. */
  .card-container {
    container-type: inline-size;
    container-name: card;
  }

  /* When the container (not the viewport) is at least 400px wide,
     switch card layout to horizontal. */
  @container card (min-width: 400px) {
    .card-container {
      .card {
        flex-direction: row;
        align-items: flex-start;
      }

      .card-image {
        width: 200px;
        flex-shrink: 0;
        /* Keep height auto so it preserves aspect ratio */
        height: auto;
      }
    }
  }
}

/* Modern feature with fallback (Option 2: color-mix()) */

/* Fallback hover state (static color) */
.card-container .card:hover {
  background-color: #f0f0f0;
}

/* Enhanced hover state using color-mix() in oklch */
@supports (background: color-mix(in oklch, red, blue)) {
  .card-container .card:hover {
    background-color: color-mix(in oklch, var(--bg-clr) 92%, black);
  }
}
